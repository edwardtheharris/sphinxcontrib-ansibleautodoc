---
- name: 'Test playbook'
  hosts: all
  gather_facts: false
  tasks:
    - name: 'First task'
      ansible.builtin.debug:
        msg: "one"
    - name: Second task
      ansible.builtin.debug:
        msg: "one"
        verbosity: false
    - name: Include playbook
      ansible.builtin.include_tasks: included.yml
    - name: Condition
      ansible.builtin.debug:
        msg: "condition"
      when: true

    - name: Multiple args
      ansible.builtin.debug:
        msg: 'A message'
      when:
        - 1 == 1
        - 2 == 2
      tags:
        - tag
      become: true

    - name: Set my var
      ansible.builtin.set_fact:
        my_var: 128

    - name: Looping with a condition.
      ansible.builtin.debug:
        msg: "ls {{ dir }}"
      when: my_var == 128
      loop:
        - ./
        - ./my_dir
        - ./another_dir/subdir

    - name: Looping task with lots of parameters
      ansible.builtin.debug:
        msg: 19
        verbosity: false
      environment:
        ITEM_PASS: "{{ item.password }}"
        ITEM_USERNAME: "{{ item.username }}"
        ITEM_VALUE: "{{ item.value }}"
      loop:
        - password: abc123
          username: simon
          value: 11246
        - password: bad_pass
          username: yuen
          value: 909090
      register: proc_results

  roles:
    - role: three
